<!DOCTYPE html> 
<html>
<head>
	<title>Ramadan Shows 2021</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="https://code.jquery.com/mobile/1.3.2/jquery.mobile-1.3.2.min.css" />
	<script src="https://code.jquery.com/jquery-1.9.1.min.js"></script>
	<script src="https://code.jquery.com/mobile/1.3.2/jquery.mobile-1.3.2.min.js"></script>
</head>

<body>
<div data-role="page">
	
<div data-role="header" title="INPUT">	
<fieldset data-role="controlgroup" data-type="horizontal">
    <select name="select-1" id="select-1" style="width:100%; font-size:200px" titlel="A">
    </select> 

    <select name="select-2" id="select-2" style="width:100%; font-size:200px" titlel="B">
        <option value="01">01</option><option value="02">02</option><option value="03">03</option><option value="04">04</option><option value="05">05</option><option value="06">06</option><option value="07">07</option><option value="08">08</option><option value="09">09</option><option value="10">10</option>
        <option value="11">11</option><option value="12">12</option><option value="13">13</option><option value="14">14</option><option value="15">15</option><option value="16">16</option><option value="17">17</option><option value="18">18</option><option value="19">19</option><option value="20">20</option>
        <option value="21">21</option><option value="22">22</option><option value="23">23</option><option value="24">24</option><option value="25">25</option><option value="26">26</option><option value="27">27</option><option value="28">28</option><option value="29">29</option><option value="30">30</option>
    </select>
</fieldset>
<script>
	$( window ).load(function() {
  		// Run code
		var A = "https://w.cima4ever.com/?cat=2385&genre=&release-year=2021";
		var B = "https://o.laroza.net:2053/category.php?cat=ramadan-2021";
		
		var link1 = $('<a/>');
       		link1.attr('href', A);
       		link1.text(A);
		
		var link2 = $('<a/>');
       		link2.attr('href', B);
       		link2.text(B);
		
		$('#footer').html( link1 );
		
		init();
	});
	
	
	function init() {
		return $.getJSON('https://api.npoint.io/6c64177300ffdb86515f');
	};

	$.when(init()).then(function (data) {
		jQuery.data( document.body, "json", data );
  		alert( JSON.stringify(Object.keys(data)) );
		populateSelect();
	});
	
	function populateSelect()
	{
		var json = jQuery.data( document.body, "json" );
		for (const key in json)
		{
			$('<option/>').val(key).text(key).appendTo('#select-1');
		}
	};
	
	$('#select-1').change(function() {
		var json = jQuery.data( document.body, "json" );
		for (const key in json[ $('#select-1').val() ])
		{
			$('<option/>').val(key).text(key).appendTo('#select-2');
		}
	});
	
	$('#select-2').change(function() {
		var  episode = $('#select-2').val();
  		var showURL = $('#select-1').val();
		showURL = showURL.replace("${EPISODE}", episode);
		
		var video = $('<video />', {
        		id: 'video',
        		src: showURL,
        		type: 'video/mp4',
			width: '100%',
			autoplay: true,
        		controls: true
    		});
		
		$("#video_player").empty();
    		$('#video_player').append(video);
		
		var link = $('<a/>');
       		link.attr('href', showURL);
       		link.text(showURL);
		$('#footer').html(link);
	});
</script>
	
</div>

<div data-role="content"><div id="video_player" width="100%" title="Function" /></div>

<div data-role="footer" id="footer" stlye="color:green" title="output" />
	
</div>
</body>
</html>
